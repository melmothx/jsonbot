#!/usr/bin/env python
#
#

import warnings
warnings.simplefilter("ignore")

## bootstrap

import os, sys
sys.path.insert(0, os.getcwd())

from gozerlib.utils.generic import isdebian, botuser
from gozerlib.version import getversion

from optparse import OptionParser
parser = OptionParser(usage='usage: %prog [options', version=getversion("INIT"))
parser.add_option('-d', '--datadir', type='string', default=False, dest='datadir')
parser.add_option('-l', '--loglevel', type='string', default=False, dest='loglevel')
opts, args = parser.parse_args()
opts.args = args

from gozerlib.utils.log import setloglevel
setloglevel(opts.loglevel or "error")

import logging
logging.warn(getversion("INIT"))

from gozerlib.datadir import makedirs
if isdebian() and botuser == "jsonbot": makedirs("/var/cache/jsonbot")
else: makedirs(opts.datadir)

from gozerlib.utils.opts import makeircconfig, makexmppconfig
irccfg = makeircconfig('irc') ; irccfg.save()
xmppconfig = makexmppconfig("xmpp") ; xmppconfig.save()
